<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Personal Website">
    <meta name="author" content="Max Diefenbach">
    <title>Max Diefenbach</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/a81715ae5b.js" crossorigin="anonymous"></script>
    <link href="../css/styles.css" rel="stylesheet">
    <link href="../css/codeblock.css" rel="stylesheet">
</head>
<body>
    <div class="sidebar">
        <div class="container">
            <div class="sidebar-about">
                <div class="site__title">
                    <a href="../">Max Diefenbach</a>
                </div>
                <div class="author-image">
                    <a href="../"><img src="https://www.gravatar.com/avatar/cf1c28d916585358f56b58cb7cb7bf2b?s=240&amp;d=mp" class="img--circle img--headshot element--center" alt="gravatar"></a>
                </div>
                <div class="section__social">
                    <section class="social">
                        <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/diefenbach_max"><i class="fa fa-twitter fa-lg">
                        </i></a> <a target="_blank" rel="noopener noreferrer" href="https://linkedin.com/in/maxdiefenbach"><i class="fa fa-linkedin fa-lg">
                        </i></a> <a target="_blank" rel="noopener noreferrer" href="https://github.com/maxdiefenbach"><i class="fa fa-github fa-lg">
                        </i></a> <a target="_blank" rel="noopener noreferrer" href="https://orcid.org/0000-0002-5581-885X"><i class="fab fa-orcid fa-lg">
                        </i></a> <a target="_blank" rel="noopener noreferrer" href="https://www.researchgate.net/profile/Maximilian_Diefenbach">
                        <i class="fab fa-researchgate fa-lg"></i></a>
                    </section>
                </div>
                <div class="site__description">
                    <p>Systems engineer, physicist, dev, Dr. rer.
                    nat, emacs user, chess and ukulele player</p>
                </div>
            </div>
            <div class="collapsible-menu">
                <input type="checkbox" id="menuToggle"> <label for="menuToggle">Max Diefenbach</label>
                <div class="menu-content">
                    <ul class="sidebar-nav">
                        <!-- <li><a href="/">Home</a></li> -->
                        <li>
                            <a href="../pages/contact.html">Contact</a>
                        </li>
                        <li>
                            <a href="../pages/research.html">Research</a>
                        </li>
                        <li>
                            <a href="../pages/code.html">Code</a>
                        </li>
                        <li>
                            <a href="../pages/posts.html">Posts</a>
                        </li>
                        <li>
                            <a href="../pages/impressum.html" style="font-size:small;color:rgba(255,255,255,0.5);">
                            Impressum</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                © 2016--2024 Max Diefenbach
            </div>
        </div>
    </div>
    <div class="content container">
        <main role="main">
            <h1>HTTP requests in different languages</h1><article>
    <section class="header">
        Posted on September 23, 2023
        
        <div class="info">
            
            Tags: <a title="All pages tagged 'howto'." href="../posts/tags/howto.html">howto</a>, <a title="All pages tagged 'web'." href="../posts/tags/web.html">web</a>, <a title="All pages tagged 'emacs'." href="../posts/tags/emacs.html">emacs</a>, <a title="All pages tagged 'python'." href="../posts/tags/python.html">python</a>, <a title="All pages tagged 'julia'." href="../posts/tags/julia.html">julia</a>, <a title="All pages tagged 'haskell'." href="../posts/tags/haskell.html">haskell</a>, <a title="All pages tagged 'bash'." href="../posts/tags/bash.html">bash</a>
            
        </div>
    </section>
    <br />
    <section>
        <p><em>This is a simple overview over how to issue GET and POST (and maybe some other) HTTP request with different tools and in different programming languages.</em></p>
<h2 id="python">Python</h2>
<p>In python the <code class="verbatim">requests</code> package is sort of the modern standard.</p>
<p><a href="https://requests.readthedocs.io/en/latest/user/quickstart/">Quickstart — Requests documentation</a></p>
<h3 id="get">GET</h3>
<div class="sourceCode" id="cb1" data-results="output"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests <span class="im">as</span> req</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&quot;http://httpbin.org/get&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> req.get(url)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;status code: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>pprint(response.json())</span></code></pre></div>
<h3 id="post">POST</h3>
<div class="sourceCode" id="cb2" data-results="output"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests <span class="im">as</span> req</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&quot;http://httpbin.org/post&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">&quot;key&quot;</span>: <span class="st">&quot;value&quot;</span>}</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> req.post(url, data)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;status code: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>pprint(response.json())</span></code></pre></div>
<h2 id="curl">Curl</h2>
<p>Curl is a common commandline tool for web requests.</p>
<h3 id="get-1">GET</h3>
<div class="sourceCode" id="cb3" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="st">&quot;http://www.example.com/when/junk.cgi?birthyear=1905&amp;press=OK&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb4" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> http://url1.example.com</span></code></pre></div>
<div class="sourceCode" id="cb5" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="st">&quot;http://www.example.com/when/junk.cgi?birthyear=1905&amp;press=OK&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb6" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">--user</span> name:password http://www.example.com</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<div class="sourceCode" id="cb7" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-H</span> <span class="st">&quot;Authorization: OAuth &lt;ACCESS_TOKEN&gt;&quot;</span> http://www.example.com</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-H</span> <span class="st">&quot;Authorization: Bearer &lt;ACCESS_TOKEN&gt;&quot;</span> http://www.example.com</span></code></pre></div>
<h3 id="post-1">POST</h3>
<div class="sourceCode" id="cb8" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-d</span> <span class="st">'name=admin&amp;shoesize=12'</span> http://example.com/</span></code></pre></div>
<div class="sourceCode" id="cb9" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-T</span> localfile http://example.com/new/resource/file</span></code></pre></div>
<div class="sourceCode" id="cb10" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-d</span> <span class="st">&quot;data to PUT&quot;</span> <span class="at">-X</span> PUT http://example.com/new/resource/file</span></code></pre></div>
<h3 id="others">Others</h3>
<p>GET is default, using -d or -F makes it a POST, -I generates a HEAD and -T sends a PUT.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">man</span> curl</span></code></pre></div>
<p>-X, –request &lt;command&gt; (HTTP) Specifies a custom request method to use when communicating with the HTTP server. The specified request method will be used instead of the method otherwise used (which defaults to GET). Read the HTTP 1.1 specification for details and explanations. Common additional HTTP requests include PUT and DELETE, but related technologies like WebDAV offers PROPFIND, COPY, MOVE and more.</p>
<p><a href="https://everything.curl.dev/">https://everything.curl.dev/</a></p>
<h2 id="matlab">Matlab</h2>
<p>Matlab has simple functions wrapping http requests, <code class="verbatim">webread</code> and <code class="verbatim">webwrite</code>. Both can be passed a <code class="verbatim">weboptions</code> object (<a href="https://de.mathworks.com/help/matlab/ref/weboptions.html">Specify parameters for RESTful web service - MATLAB weboptions</a>).</p>
<h3 id="get-2">GET</h3>
<p><a href="https://www.mathworks.com/help/matlab/ref/webread.html">Read content from RESTful web service - MATLAB webread</a></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="va">url</span> <span class="op">=</span> <span class="st">&quot;http://requestserver.mathworks.com/employee&quot;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="va">opts</span> <span class="op">=</span> <span class="va">weboptions</span>(<span class="st">&quot;ContentType&quot;</span><span class="op">,</span> <span class="st">&quot;text&quot;</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="va">response</span> <span class="op">=</span> <span class="va">webread</span>(<span class="va">url</span><span class="op">,</span> <span class="st">&quot;firstName&quot;</span><span class="op">,</span> <span class="st">&quot;Sarah&quot;</span><span class="op">,</span> <span class="va">opts</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="post-2">POST</h3>
<p><a href="https://de.mathworks.com/help/matlab/ref/webwrite.html">Write data to RESTful web service - MATLAB webwrite - MathWorks Deutschland</a></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="va">url</span> <span class="op">=</span> <span class="ss">'https://requestserver.mathworks.com'</span><span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="va">data</span>(<span class="fl">1</span>).<span class="va">Name</span> <span class="op">=</span> <span class="ss">'Jon'</span><span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="va">data</span>(<span class="fl">1</span>).<span class="va">Occupation</span> <span class="op">=</span> <span class="ss">'Doctor'</span><span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="va">data</span>(<span class="fl">2</span>).<span class="va">Name</span> <span class="op">=</span> <span class="ss">'Sarah'</span><span class="op">;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="va">data</span>(<span class="fl">2</span>).<span class="va">Occupation</span> <span class="op">=</span> <span class="ss">'Engineer'</span><span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="va">opts</span> <span class="op">=</span> <span class="va">weboptions</span>(<span class="ss">'MediaType'</span><span class="op">,</span> <span class="ss">'application/json'</span>)<span class="op">;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="va">response</span> <span class="op">=</span> <span class="va">webwrite</span>(<span class="va">url</span><span class="op">,</span> <span class="va">data</span><span class="op">,</span> <span class="va">opts</span>)</span></code></pre></div>
<h2 id="emacs-lisp">Emacs Lisp</h2>
<p>In Emacs Lisp http requests were a bit more tricky to learn as parameter passing is different compared to the packages from other languages. The standard package is url.el which one loads with:</p>
<div class="sourceCode" id="cb14" data-org-language="emacs-lisp"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> 'url)</span></code></pre></div>
<p>The main functions are</p>
<pre class="example"><code>(url-retrieve URL CALLBACK &amp;optional CBARGS SILENT INHIBIT-COOKIES)
</code></pre>
<p>for asynchronous requests, where you need to parse a callback function, and</p>
<pre class="example"><code>(url-retrieve-synchronously URL &amp;optional SILENT INHIBIT-COOKIES TIMEOUT)
</code></pre>
<p>which runs synchronously, so emacs halts and one needs to wait for the response.</p>
<p>Both functions take same getting used to as they use external variables and juggle response buffers around: <code class="verbatim">url-retrieve-synchronously</code> returns a buffer with the response data (of nil if there is no data).</p>
<p><a href="https://www.emacswiki.org/emacs/UrlPackage">EmacsWiki: Url Package</a></p>
<h3 id="get-3">GET</h3>
<div class="sourceCode" id="cb17" data-org-language="emacs-lisp"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let*</span> ((url <span class="st">&quot;http://httpbin.org/get&quot;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>       (url-request-method <span class="st">&quot;GET&quot;</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>       (url-request-extra-headers `((<span class="st">&quot;Content-Type&quot;</span> . <span class="st">&quot;application/json&quot;</span>)))</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>       (buffer (url-retrieve-synchronously url)))</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  (switch-to-buffer buffer))</span></code></pre></div>
<h3 id="post-3">POST</h3>
<p>For a POST one also sets the variable <code class="verbatim">url-request-data</code>, which is just a string.</p>
<div class="sourceCode" id="cb18" data-org-language="emacs-lisp"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let*</span> ((url <span class="st">&quot;http://httpbin.org/post&quot;</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>       (url-request-method <span class="st">&quot;POST&quot;</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>       (url-request-extra-headers `((<span class="st">&quot;Content-Type&quot;</span> . <span class="st">&quot;application/json&quot;</span>)))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>       (url-request-data <span class="st">&quot;key=value&quot;</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>       (buffer (url-retrieve-synchronously url)))</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  (switch-to-buffer buffer))</span></code></pre></div>
<p>(buffer-substring url-http-end-of-headers (point-max)))</p>
<h3 id="other">Other</h3>
<p>When writing a emacs-lisp package to interact with some rest apis, I stumbled upon a weird behaviour / bug, which was resolved by utf-8 encoding of <code class="verbatim">url-request-method</code> and <code class="verbatim">url-request-data</code> like in the following function:</p>
<div class="sourceCode" id="cb19" data-org-language="emacs-lisp"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">defun</span><span class="fu"> mnd/http-request </span>(<span class="kw">method</span> url auth &amp;optional data)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Make a HTTP request and return json string.&quot;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let*</span> ((url-request-method (encode-coding-string <span class="kw">method</span> 'utf<span class="dv">-8</span>))</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>         (url-request-extra-headers</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>          `((<span class="st">&quot;Authorization&quot;</span> . auth)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>            (<span class="st">&quot;Content-Type&quot;</span> . <span class="st">&quot;application/json&quot;</span>)))</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>         (url-request-data (<span class="kw">when</span> data (encode-coding-string data 'utf<span class="dv">-8</span>)))</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>         (buffer (url-retrieve-synchronously url)))</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">unwind-protect</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        (with-current-buffer buffer</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>          (message <span class="st">&quot;%s&quot;</span> url-request-data)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>          (message <span class="st">&quot;%s&quot;</span> (buffer-substring (point-min) url-http-end-of-headers))</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>          (buffer-substring url-http-end-of-headers (point-max)))</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>      (kill-buffer buffer))))</span></code></pre></div>
<p>It also illustrates how the response buffer of <code class="verbatim">url-retrieve-synchronously</code> can be used further by first extracting the response data from it via</p>
<div class="sourceCode" id="cb20" data-org-language="emacs-lisp"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(buffer-substring url-http-end-of-headers (point-max))</span></code></pre></div>
<p>Here are some links I collected that described the same problem, when multibyte strings are the <code class="verbatim">url-request-data</code>:</p>
<ul>
<li><a href="https://debbugs.gnu.org/cgi/bugreport.cgi?bug=23750">https://debbugs.gnu.org/cgi/bugreport.cgi?bug=23750</a></li>
<li><a href="https://github.com/ternjs/tern/issues/719">https://github.com/ternjs/tern/issues/719</a></li>
<li><a href="https://github.com/magit/ghub/issues/35">https://github.com/magit/ghub/issues/35</a></li>
<li><a href="https://github.com/magit/ghub/pull/10">https://github.com/magit/ghub/pull/10</a></li>
<li><a href="https://github.com/karthink/gptel/issues/4">https://github.com/karthink/gptel/issues/4</a></li>
<li><a href="https://github.com/d1egoaz/c3po.el/blob/b81f4c48616932f375104419b3f2d1a74b5db28e/c3po.el#L88">https://github.com/d1egoaz/c3po.el/blob/b81f4c48616932f375104419b3f2d1a74b5db28e/c3po.el#L88</a></li>
<li><a href="https://github.com/karthink/gptel/pull/29/commits">https://github.com/karthink/gptel/pull/29/commits</a></li>
<li><a href="https://github.com/karthink/gptel/pull/29/commits/1ad773e39e389d10ef858ded1ef7b8861eee2995">https://github.com/karthink/gptel/pull/29/commits/1ad773e39e389d10ef858ded1ef7b8861eee2995</a></li>
</ul>
<h3 id="emacs-restclient">Emacs restclient</h3>
<p>There is also a complete restclient written in emacs-lisp, <a href="https://github.com/pashky/restclient.el">GitHub - pashky/restclient.el: HTTP REST client tool for emacs</a>, which is awesome and there is even an org-babel mode for it, <a href="https://github.com/alf/ob-restclient.el">GitHub - alf/ob-restclient.el: An org-mode extension to restclient.el</a>. With these packages running http requests in a literate org document looks like this:</p>
<h4 id="get-4">GET</h4>
<pre class="restclient"><code>GET http://httpbin.org/get
</code></pre>
<h4 id="post-4">POST</h4>
<pre class="restclient"><code>POST http://httpbin.org/post
{&quot;key&quot;: &quot;value&quot;}
</code></pre>
<h2 id="julia">Julia</h2>
<p>Julia being the most modern language in this list, the API for http requests feels very nice, like it combines the benefits of all other packages. The package for http is <a href="https://juliaweb.github.io/HTTP.jl/stable/index.html#HTTP.request-Tuple%7BString,HTTP.URIs.URI,Array%7BPair%7BSubString%7BString%7D,SubString%7BString%7D%7D,1%7D,Any%7D">HTTP.jl</a> and using it look like this:</p>
<h3 id="get-5">GET</h3>
<div class="sourceCode" id="cb23" data-results="output"><pre class="sourceCode julia"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> HTTP</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> JSON</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&quot;http://httpbin.org/get&quot;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>query <span class="op">=</span> [<span class="st">&quot;key&quot;</span> <span class="op">=&gt;</span> <span class="st">&quot;value&quot;</span>]</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> HTTP.get(url<span class="op">,</span> query<span class="op">=</span>query)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>print(JSON.parse(<span class="dt">String</span>(response.body)))</span></code></pre></div>
<h3 id="post-5">POST</h3>
<div class="sourceCode" id="cb24" data-results="output"><pre class="sourceCode julia"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> HTTP</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&quot;http://httpbin.org/post&quot;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="dt">Dict</span>(<span class="st">&quot;key&quot;</span> <span class="op">=&gt;</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> HTTP.post(url<span class="op">;</span> body<span class="op">=</span>data)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>print(response)</span></code></pre></div>
<h2 id="haskell">Haskell</h2>
<p>I think in haskell a good goto package for web requests is <a href="http://www.serpentine.com/wreq/tutorial.html">wreq</a>.</p>
<h3 id="get-6">GET</h3>
<div class="sourceCode" id="cb25" data-tangle="get.hs"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#!/usr/bin/env stack</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">{- stack</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">script</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">--resolver lts-18.19</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">--package wreq</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">--package lens</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">--package aeson</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">--</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">+RTS -s -RTS</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">-}</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# LANGUAGE OverloadedStrings #-}</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="dt">Network.Wreq</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="dt">Control.Lens</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>main <span class="ot">=</span> <span class="kw">do</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>        r <span class="ot">&lt;-</span> get <span class="st">&quot;http://httpbin.org/get&quot;</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span> <span class="op">$</span> r <span class="op">^.</span> responseStatus <span class="op">.</span> statusCode</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span> <span class="op">$</span> r <span class="op">^.</span> responseBody</span></code></pre></div>
<h3 id="post-6">POST</h3>
<div class="sourceCode" id="cb26" data-tangle="post.hs"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#!/usr/bin/env stack</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">{- stack</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">script</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">--resolver lts-18.19</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">--package wreq</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">--package lens</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">--package aeson</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">--</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">+RTS -s -RTS</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co">-}</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# LANGUAGE OverloadedStrings #-}</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="dt">Network.Wreq</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="dt">Control.Lens</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="dt">Data.Aeson</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>main <span class="ot">=</span> <span class="kw">do</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>        r <span class="ot">&lt;-</span> post <span class="st">&quot;http://httpbin.org/post&quot;</span> [<span class="st">&quot;num&quot;</span> <span class="op">:=</span> (<span class="dv">3</span><span class="ot"> ::</span> <span class="dt">Int</span>), <span class="st">&quot;str&quot;</span> <span class="op">:=</span> (<span class="st">&quot;wat&quot;</span><span class="ot"> ::</span> <span class="dt">String</span>)]</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span> <span class="op">$</span> r <span class="op">^.</span> responseStatus</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span> <span class="op">$</span> r <span class="op">^.</span> responseBody</span></code></pre></div>
    </section>
</article>

<div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    var disqus_config = function () {
    this.page.url = "https://maxdiefenbach.de//posts/2023-09-23-http.html";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "https://maxdiefenbach.de//posts/2023-09-23-http.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://maxdiefenbach-de.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

        </main>
    </div>
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
             <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
             <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script> -->
</body>
</html>
